//= require_self
//= require_tree ./config
//= require_tree ./controllers

var app = angular.module("app", ['slick', 'ngTouch', 'ngDialog', 'gridster', 'checklist-model', 'ngResource', 'ngMaterial', 'ui.router'])

app.run(['Config', function(Config){
  params = location.search.slice(1).split('&').map(p => p.split('=')).reduce((obj, [key, value]) => ({ ...obj, [key]: value }), {});
  Config.flow_id = params.flow_id;
  Config.application_uid = params.application_uid;
}])

app.run(['Action', '$rootScope', '$http', 'Template', 'DataSource', 'Config', function(Action, $rootScope, $http, Template, DataSource, Config){
  $rootScope.Action = Action;
  $rootScope.DataSource = DataSource;
  $rootScope.Template = Template;
}])

_.templateSettings = {
  interpolate: /\{\{(.+?)\}\}/g
};