<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-type" content="text/html; charset=utf-8">

  <title>Accept Invitation</title>
  <%= stylesheet_link_tag   "beach_api_core/application", :media => "all" %>

  <%= csrf_meta_tag %>

</head>
<body >
<div id="container">
  <div class="header">
    <div class="image-header">
      <div class="img">
        <%= image_tag('beach_api_core/beach-logo.png', class:'img')%>
      </div>
    </div>
    <% if @result[:status] != 'wrong_token' %>
        <div class="header-text">Please complete registration to accept the invitaton to <%= @group %></div>
    <% end %>
  </div>
  <div class="body">
    <% if @result[:status] == 'wrong_token' %>
        <div class="wrong_token">
          <p style='font-size: 25px'> Your Invitation token is wrong</p>
        </div>
    <% else %>
        <%= form_for @user, url: accept_v1_invitation_path, class: "formtastic session", method: :post do |f| %>
            <% if @result[:status] != 'updated' && @result[:message].any?%>
                <ul>
                  <% @result[:message].each do |msg| %>
                      <li class="error_text"><%= msg %></li>
                  <% end %>
                </ul>
            <% end %>
            <fieldset class="inputs-form">
              <ul>
                <li class="string input required stringish" id="new_password_input">
                  <label for="email" class="label_text">Email Address:
                  </label>
                  <input id="email" disabled type="email" name="invitation[email]" value="<%= @user.email %>">
                </li>
                <li class="string input required stringish" id="new_password_input">
                  <label for="password" class="label_text">New Password:
                  </label>
                  <input id="password" required type="password" name="invitation[password]">
                </li>
                <li class="string input required stringish" id="confirm_password_input">
                  <label for="confirm_password" class="label_text"  >Confirm Password:
                  </label>
                  <input id="password_confirmation" required type="password" name="invitation[[password_confirmation]">
                </li>
                <%= hidden_field_tag "token", params[:token]%>

                <fieldset class="actions">
                  <ul>
                    <li class="action input_action" id="password_submit_action">
                      <input class="submit-button" type="submit" name="commit" value="Set New Password" data-disable-with="Restore Password">
                    </li>
                  </ul>
                </fieldset>
              </ul>
            </fieldset>
        <% end %>
    <% end %>
  </div>
  <div class="footer">
    <div class="image-header">
      <div>
        <%= image_tag('beach_api_core/beach-logo.png', class:'img-footer')%>
      </div>
      <label class="header-text">Identity Provided by Mineful</label>
    </div>


  </div>
</div>
</body>

</html>